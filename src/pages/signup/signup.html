<ion-content>
  <div text-center class="logo">
    <img src="assets/agility360-logo-transparent-512x512.png" />
  </div>
  <form (submit)="signup()" padding [formGroup]="formGroup">
    <div class="error-message" *ngIf="errorMsg">
      <p style="color: red;">{{errorMsg}}</p>
    </div>
    <div class="info-message">
      <ion-item *ngIf="formGroup.controls.email.pending">
        <p class="info-message">Checking email address...</p>
      </ion-item>
      <div *ngIf="formGroup.controls.username.pending">
        <p class="info-message">Checking username...</p>
      </div>
    </div>

    <ion-list>
      <!-- --------------------- Username ----------------------------------- -->
      <ion-item>
        <ion-label floating>
          Username
          <ion-icon name="checkmark" *ngIf="formGroup.controls.username.valid" class="valid"></ion-icon>
        </ion-label>
        <ion-input type="text"
              [class.valid]="formGroup.controls.username.valid"
              [(ngModel)]="userDetails.username"
              (blur)="usernameDidBlur($event)"
              formControlName="username"
              autocorrect="off"
              autocapitalize="none"
              name="username">
        </ion-input>
      </ion-item>

      <!-- --------------------- email address ----------------------------------- -->
      <ion-item>
        <ion-label floating>
          Email
          <ion-icon name="checkmark" *ngIf="formGroup.controls.email.valid" class="valid"></ion-icon>
        </ion-label>
        <ion-input type="email"
              [class.valid]="formGroup.controls.email.valid"
              [(ngModel)]="userDetails.email"
              (blur)="emailDidBlur($event)"
              formControlName="email"
              autocorrect="off"
              autocapitalize="none"
              name="email">
        </ion-input>
      </ion-item>

       <!-- --------------------- password ----------------------------------- -->
      <ion-item>
        <ion-label floating>
          Password
          <ion-icon name="checkmark" *ngIf="formGroup.controls.password.valid" class="valid"></ion-icon>
        </ion-label>

        <ion-input type="password"
              [class.valid]="formGroup.controls.password.valid"
              [(ngModel)]="userDetails.password"
              (blur)="passwordDidBlur($event)"
              formControlName="password"
              autocorrect="off"
              autocapitalize="none"
              name="password">
      </ion-input>
      </ion-item>
      <ion-item-divider no-lines></ion-item-divider>

      <ion-item-divider no-lines></ion-item-divider>

      <div padding>
        <p text-center>By clicking Sign Up, you agree to Agility 360's User Agreement, Privacy Policy and Cookie Policy</p>
        <button ion-button
                color="primary"
                block
                [disabled]="!formGroup.valid">Sign Up</button>

        <div text-center>
          <p><a (click)="login()">Return to login page</a>
        </div>
      </div>


    </ion-list>
  </form>
</ion-content>
