<ion-header>
  <ion-navbar>
    <ion-title>Create An Account</ion-title>
  </ion-navbar>
</ion-header>

<ion-content class="app-background">
  <div text-center class="logo">
    <img src="assets/agility360-logo-transparent-512x512.png" />
  </div>
  <form (submit)="signup()" padding [formGroup]="formGroup">
    <strong><p class="error-message" *ngIf="error">{{error.message}}</p></strong>
    <ion-list>
      <ion-item>
        <ion-label>
          <ion-icon name="person"></ion-icon>
        </ion-label>
        <ion-input type="text"
              [(ngModel)]="userDetails.username"
              formControlName="username"
              autocorrect="off"
              autocapitalize="none"
              name="username"
              placeholder="Username"
              [class.invalid]="!formGroup.controls.username.valid && formGroup.controls.username.dirty">
        </ion-input>
      </ion-item>
      <ion-item *ngIf="formGroup.controls.username.pending">
           <p>Checking username...</p>
       </ion-item>
       <ion-item *ngIf="!formGroup.controls.username.valid && !formGroup.controls.username.pending && formGroup.controls.username.dirty">
           <p>Sorry, that username can not be used!</p>
       </ion-item>

      <ion-item>
        <ion-label>
          <ion-icon name="mail"></ion-icon>
        </ion-label>
        <ion-input type="email"
              [(ngModel)]="userDetails.email"
              formControlName="email"
              name="email"
              placeholder="address@mailserver.com"
              [class.invalid]="!formGroup.controls.email.valid && formGroup.controls.email.dirty">
        </ion-input>
      </ion-item>
      <ion-item *ngIf="formGroup.controls.email.pending">
           <p>Checking email address...</p>
       </ion-item>
       <ion-item *ngIf="!formGroup.controls.email.valid && !formGroup.controls.email.pending && formGroup.controls.email.dirty">
           <p>Sorry, that email address can not be used!</p>
       </ion-item>

      <ion-item>
        <ion-label>
          <ion-icon name="lock"></ion-icon>
        </ion-label>
        <ion-input type="password"
              [(ngModel)]="userDetails.password"
              formControlName="password"
              name="password"
              placeholder="Password"
              [class.invalid]="!formGroup.controls.password.valid && formGroup.controls.password.dirty">
      </ion-input>
      </ion-item>

      <ion-item>
        <ion-label>
          <ion-icon name="lock"></ion-icon>
        </ion-label>
        <ion-input type="password" [(ngModel)]="repeatPassword" formControlName="repeatPassword" name="repeat-password" placeholder="Repeat password"></ion-input>
      </ion-item>

      <div padding>
        <button ion-button color="primary" block>Sign Up</button>
      </div>

      <div padding text-center>
        <p><a (click)="login()">Return to login</a>
      </div>

    </ion-list>
  </form>
</ion-content>
